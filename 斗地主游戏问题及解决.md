斗地主游戏问题及解决



①卡牌‘10’和‘K’在python不能按照卡牌顺序排序，如‘10’<'9','K'<'Q'

解决方法：将卡牌‘10’替换为‘99’，而‘99’>'9'，原来的卡牌‘10’就满足‘10’>'9'

同理，‘K’换成‘k’，而'k'>'Q'>'J'，原来的卡牌'K'就满足‘K’>‘Q’>‘J’，后续再把卡牌数字恢复原值

for x in n:

​    if x[0]=='10':     #调用sorted时,'10'<'1',故将'10'转换为'99',使卡牌'10'满足 '10'>'1'

​      x=list(x)      #后续再把卡牌中的'99'转换为'10'

​      x[0]='99'

​      x=tuple(x)

​    if x[0]=='K':      #调用sorted时，'K'<'J'<'Q',将'K'转换为'k',使卡牌'K'满足'J'<'Q'<'K'

​      x=list(x)      #后续再把卡牌中的'k'转换为'K'

​      x[0]='k'

​      x=tuple(x)



②在把卡牌‘10’与‘K’恢复为原值时，卡牌未能按照预想在原位置处替换，而是放在列表最后面

原因：把卡牌放回列表时用了append函数，自动添加到列表最后面

解决方法：用index方法索引到卡牌的位置，用list[index]=‘10’进行替换

  for x in n:

​    if x[0]=='99':     #将卡牌'10'转换为原来的数值

​      location=n.index(x)

​      x=list(x)

​      x[0]='10'

​      x=tuple(x)

​      n[location]=x



③终端窗口 print 时异常，不会 打印 print 中的字符，而是 打印 python 的路径

原因：先在输出窗口输出了，代码还未停止

解决方法：在输出窗口停止代码运行，再在终端运行代码



④检测卡牌是否符合规则时，顺子无法检测

解决方法：将所有卡牌从 ‘3’ 开始按 ascii代码 递增1 的顺序转换（‘3’到‘9’不用，因为其 ascii代码 是递增加1的），检测时再通过卡牌 ascii代码 的差值来检测



⑤不能实现  若检测错误，回到前面的代码重新输入

解决方法：一开始想用goto语句跳回前面的代码，但报错; 后来用 while 1:  ......   break 语句解决



⑥修改卡牌只显示数字时，若修改player1_display, 很多方法会报错

解决方法：创建一个新方法show,  用新的列表来存储卡牌的数字

def show(n):                        #显示卡牌的数字，在不改变player_display的前提下

  a=[]

  for x in n:

​    if x==('king','small') or x==('king','big'):

​      a.append(x)

​    else:

​      x=list(x)

​      x.pop(-1)

​      x=x[0]

​      a.append(x)

  return a



⑦玩家选择 ‘pass’ 时， 下一个玩家的compare(m,n)没有足够的参数

解决方法： 用player2_out=player1_out继承上一个玩家的参数



⑧遇到两个 ‘pass’ 时，玩家无法自由出牌

用passcard收集 ‘pass’ 的次数， 达到两次时可自由出牌，同时compare函数做相应的添加

if passcard%2==0:

​        player2_out=['pass']



⑧游戏结束时，不会直接显示玩家赢了，而是玩家继续输入一轮后再显示游戏结果

解决方法：把检测玩家赢了的代码放到输入卡牌的前面



